!function(){"use strict";class e{constructor(){this.pathToWorksImages="img/dist/works",this.popUpOverlayEl=document.querySelector(".pop-up__overlay"),this.wrapperShowreelsEl=document.querySelector("#portfolio-showreels .swiper-wrapper"),this.wrapperProjectsEl=document.querySelector("#portfolio-projects .swiper-wrapper"),this.acceptedEl=document.querySelector(".accepted"),this.portfolioEl=document.querySelector(".portfolio"),this.showreelsEl=document.querySelector("#portfolio-showreels"),this.projectsEl=document.querySelector("#portfolio-projects"),this.moreShowreelsEl=document.querySelector("#more-showreels"),this.moreProjectsEl=document.querySelector("#more-projects"),this.settings={slidesPerView:"auto",speed:1200,freeMode:!0,breakpoints:{320:{spaceBetween:17},601:{spaceBetween:30},1501:{spaceBetween:0}}},this.numberOfCardsOnDesktop=8}insertPortfolioIntoPage(e){this.insertShowreelsIntoPage(e),this.insertProjectsIntoPage(e),this.addCardsClickListener(e);let t=this.addSliderShowreels(),r=this.addSliderProjects();this.checkWidthWidth(t,r),this.setHeightCards(),this.addButtonsMore(e),window.addEventListener("resize",()=>{this.insertShowreelsIntoPage(e),this.insertProjectsIntoPage(e),this.addCardsClickListener(e),t.update(),r.update(),this.checkWidthWidth(t,r),this.setHeightCards(),this.addButtonsMore(e)})}insertShowreelsIntoPage(e){var t,r=window.innerWidth;let o=0,s="";this.wrapperShowreelsEl.innerHTML="";for(t of e)"showreel"==t.type&&(1500<r&&o<this.numberOfCardsOnDesktop?(s+=this.getCardMarkup(t,"Смотреть шоурил"),o++):r<=1500&&(s+=this.getCardMarkup(t,"Смотреть шоурил")));this.wrapperShowreelsEl.insertAdjacentHTML("beforeend",s)}insertProjectsIntoPage(e){var t,r=window.innerWidth;let o=0,s="";this.wrapperProjectsEl.innerHTML="";for(t of e)"project"==t.type&&(1500<r&&o<this.numberOfCardsOnDesktop?(s+=this.getCardMarkup(t,"Смотреть трейлер"),o++):r<=1500&&(s+=this.getCardMarkup(t,"Смотреть трейлер")));this.wrapperProjectsEl.insertAdjacentHTML("beforeend",s)}getCardMarkup(e,t){return`
			<div class="swiper-slide">
				<div class="portfolio__item" data-id="${e.id}">
					<div class="portfolio__img" style="background: url(${this.pathToWorksImages}/${e.image}) 0 0 / cover no-repeat" >
						<button type="button" class="portfolio__play" aria-label="Запустить видео">
							<span class="portfolio__play-txt">${t}</span>
							<svg width="60" height="54" viewBox="0 0 60 54" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M10.8333 0.333252H49.1667C54.9434 0.333252 59.6642 4.85477 59.9829 10.5518L60 11.1666V42.8333C60 48.61 55.4785 53.3307 49.7814 53.6494L49.1667 53.6666H10.8333C5.05656 53.6666 0.335847 49.1451 0.0171494 43.448L0 42.8333V11.1666C0 5.38981 4.52152 0.669098 10.2186 0.350401L10.8333 0.333252H49.1667H10.8333ZM23.5093 18.9513C23.3936 19.1827 23.3333 19.4379 23.3333 19.6966V34.3032C23.3333 35.2237 24.0795 35.9699 25 35.9699C25.2587 35.9699 25.5139 35.9096 25.7454 35.7939L40.3519 28.4906C41.1752 28.079 41.5089 27.0779 41.0973 26.2546C40.936 25.932 40.6745 25.6705 40.3519 25.5092L25.7454 18.2059C24.9221 17.7943 23.9209 18.128 23.5093 18.9513Z" fill="#F18B36"/>
							</svg>
						</button>
					</div>
					<span class="portfolio__sign">${e.name}</span>
				</div>
			</div>`}addCardsClickListener(r){document.querySelectorAll(".portfolio__item").forEach(e=>{for(let t of r)e.dataset.id==t.id&&e.addEventListener("click",()=>{var e=this.getPopUpWithVideo(t);this.popUpOverlayEl.classList.add("active-pop-up"),this.acceptedEl.insertAdjacentHTML("beforebegin",e),this.addCloseElemsClickListener(),this.addVideoElemsClickListener()})})}addCloseElemsClickListener(){document.querySelectorAll(".video__close").forEach(t=>{t.addEventListener("click",()=>{var e=t.closest(".video");this.popUpOverlayEl.classList.remove("active-pop-up"),e.style.display="none",this.removeIframeVideo(e)})})}addVideoElemsClickListener(){document.querySelectorAll(".video").forEach(e=>{e.addEventListener("click",()=>{this.popUpOverlayEl.classList.remove("active-pop-up"),e.style.display="none",this.removeIframeVideo(e)})})}removeIframeVideo(e){e=e.querySelector("iframe");e&&e.parentNode.removeChild(e)}getPopUpWithVideo(e){return`
			<div class="video">
				<div class="video__body">
					<iframe width="1200" height="90%" src="${e.youtubeLink}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
				</div>
				<button type="button" class="video__close" id="video-close">
					<svg width="27" height="27" viewBox="0 0 27 27" xmlns="http://www.w3.org/2000/svg" class="video__close-icon">
						<path d="M1.9375 1.9375L25.0625 25.0625" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
						<path d="M25.0625 1.9375L1.9375 25.0625" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
				</button>
			</div>`}addSliderShowreels(){return new Swiper("#portfolio-showreels",{...this.settings,scrollbar:{draggable:!0,el:".showreels-scrollbar"}})}addSliderProjects(){return new Swiper("#portfolio-projects",{...this.settings,scrollbar:{draggable:!0,el:".projects-scrollbar"}})}checkWidthWidth(e,t){1500<+this.portfolioEl.getBoundingClientRect().width.toFixed(1)?(e.allowTouchMove=!1,t.allowTouchMove=!1):(e.allowTouchMove=!0,t.allowTouchMove=!0)}setHeightCards(){document.querySelectorAll(".portfolio__img").forEach(e=>{var t=e.offsetWidth;e.style.height=1.515*t+"px"})}addButtonsMore(e){this.addButtonMoreShowreels(e),this.addButtonMoreProjects(e)}addButtonMoreShowreels(e){var t=document.querySelectorAll("#portfolio-showreels .portfolio__item").length,r=this.findNumberWorks(e,"showreel");this.moreShowreelsEl.style.display=t<r?"block":"none",this.addButtonMoreShowreelsClickListener(e)}addButtonMoreProjects(e){var t=document.querySelectorAll("#portfolio-projects .portfolio__item").length,r=this.findNumberWorks(e,"project");this.moreProjectsEl.style.display=t<r?"block":"none",this.addButtonMoreProjectsClickListener(e)}addButtonMoreShowreelsClickListener(r){this.moreShowreelsEl.addEventListener("click",()=>{let e="";this.wrapperShowreelsEl.innerHTML="";for(var t of r)"showreel"==t.type&&(e+=this.getCardMarkup(t,"Смотреть трейлер"));this.wrapperShowreelsEl.insertAdjacentHTML("beforeend",e),this.addCardsClickListener(r),this.setHeightCards(),this.moreShowreelsEl.style.display="none"})}addButtonMoreProjectsClickListener(r){this.moreProjectsEl.addEventListener("click",()=>{let e="";this.wrapperProjectsEl.innerHTML="";for(var t of r)"project"==t.type&&(e+=this.getCardMarkup(t,"Смотреть трейлер"));this.wrapperProjectsEl.insertAdjacentHTML("beforeend",e),this.addCardsClickListener(r),this.setHeightCards(),this.moreProjectsEl.style.display="none"})}findNumberWorks(e,t){return e.filter(function(e){return e.type==t}).length}}window.addEventListener("load",()=>{(new e).insertPortfolioIntoPage(works)})}();